{% load l10n_tags %}
{% load i18n %}

<div id="sidebar">
    <figure class="project_img">
      <a id="id-course-image-link" href="{{ course.get_absolute_url }}">
        {% if course.image %}
  	         <img id="id-course-image" src="{{ course.image.url }}" alt="course image"/>
        {% else %}
             <img id="id-course-image" src="{{ STATIC_URL}}images/project-missing.png" alt="course image"/>
        {% endif %}
        {% if course.draft %}
          <img id="id-course-image-overlay" src="{{ STATIC_URL }}images/course-draft.png" alt="draft course"/>
        {% endif %}
      </a>
    </figure>

    {% if organizer or learner %}
      <hr/>
      <div>
        <a href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-text="{% trans 'Come join me at P2PU' %}" data-url="https://p2pu.org{{ course_url }}">Tweet</a>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        <!-- Place this tag where you want the +1 button to render. -->
        <div class="g-plusone" data-size="medium"></div>

        <!-- Place this tag after the last +1 button tag. -->
        <script type="text/javascript">
          (function() {
            var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
          })();
        </script>
      </div>
    {% endif %}

    <div id="course-singup">
      {% if show_signup %}
        <form method="post" action="{% locale_url courses_signup course_id=course.id %}">
          {% csrf_token %}
          <p><button id="signup_button">{{ _('Start Course') }}</button></p>
        </form>
      {% endif %}
      {% if show_leave_course %}
        <form method="post" action="{% locale_url courses_leave course_id=course.id username=user.username %}">
          {% csrf_token %}
          <p><button id="leave_direct_signup_button">{{ _('Leave Course') }}</button></p>
        </form>
      {% endif %}
    </div>

    <hr/>
    <div id="sidebar-content-list">
      <h2>{% trans "Content" %}</h2>
      {% if course.content|length %}
        <ul class="unstyled">
          {% for task in course.content %}
            <li class="clearfix">
              <a class="taskLink" href="{% locale_url courses_content_show course_id=course.id, content_id=task.id %}">{{ task.title }}</a>
              <div>
              {% if organizer %}
                <form class="pull-left" action="{% locale_url courses_content_remove course_id=course.id content_id=task.id %}" method="POST">
                  {% csrf_token %}
                  <button class="btn btn-mini btn-danger" type="submit">{% trans "remove" %}</button>
                </form>
                <a href="{% locale_url courses_content_edit course_id=course.id content_id=task.id %}?next_url={{ course_url }}">
                  <i class="icon-edit"></i>
                </a>
              {% endif %}
              {% if organizer %}
                  {% if not forloop.first %}<a class="pull-right" href="{% locale_url courses_content_up course_id=course.id content_id=task.id %}"><i class="icon-arrow-up"></i></a>{% endif %}
                  {% if not forloop.last %}<a class="pull-right" href="{% locale_url courses_content_down course_id=course.id content_id=task.id%}"><i class="icon-arrow-down"></i></a>{% endif %}
              {% endif %}

              </div>
            </li>
          {% endfor %}
        </ul>
        {% if organizer %}
          <a href="{% locale_url courses_create_content course_id=course.id %}?next_url={{ course_url }}">{% trans "Add more content" %}</a>
        {% endif %}
      {% else %}
        {% if organizer %}
          <p class="text-info">{% blocktrans %}This course doesn't have any content yet. {% endblocktrans %}<a href="{% locale_url courses_create_content course_id=course.id%}">Click here</a> to add some.</p>
        {% endif %}
      {% endif %}
    </div>

    <hr/>
    <div id="course-description">
      <h2>{% trans "Description" %}</h2>
      <p>{{ course.description }}</p>
    </div>
    {% if tags %}
      <h3><b>{{ _('Tags') }}</b></h3>
      <ul class="tags">
        {% for tag in tags %}
          <li>
              {{ tag.name }}
          </li>
        {% endfor %}
      </ul>
    {% endif %}
</div> <!-- /#sidebar -->

